<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta name="format-detection" content="telephone=no">
	<meta content="telephone=no" name="format-detection">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="assets/stylesheets/style.css" type="text/css" /> 
    <script language="javascript" type="text/javascript" src="./assets/javascript/size.js"></script>
    <script language="javascript" type="text/javascript" src="./assets/javascript/jquery-2.1.4.min.js"></script>
    <script  language="javascript" type="text/javascript" src="./assets/javascript/tools.js"></script>
    <title>数据选择和数据拾取器-demo样板</title>
    <style>
        .li{ display: block; line-height: 40px; text-align: center; font-size: 14px; background: #fff; border-top: 1px solid #eee; border-bottom: 1px solid #eee; margin-bottom: 10px;}
    </style>
</head>
<body>
    <div class="editlinebox editlinebox-nmt editlinebox-nbt">
        <div class="editline editline-select editline-cover" id="J_line_dataselect">
            <p class="el-ado">单行数据</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" id="J_a" /></div>
        </div>
        <div class="J_choosetime editline editline-select editline-cover" data-title="开始日期-列表日期" data-timegroup="y-m-d" data-format="y/m/d">
            <p class="el-ado">开始日期-列表日期</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
        <div class="J_choosetime editline editline-select editline-cover" data-title="结束日期-列表日期" data-timegroup="y-m-d" data-format="y/m/d">
            <p class="el-ado">结束日期-列表日期</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
        <div class="J_choosetable editline editline-select editline-cover" data-title="开始日期-表格日期" data-timegroup="y-m-d" data-format="y/m/d">
            <p class="el-ado">开始日期-表格日期</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
        <div class="J_choosetable editline editline-select editline-cover" data-title="结束日期-表格日期" data-timegroup="y-m-d" data-format="y/m/d">
            <p class="el-ado">结束日期-表格日期</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
        <div class="editline editline-select editline-cover" id="J_address">
            <p class="el-ado">地址选择</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
        <div class="editline editline-select editline-cover" id="J_mult">
            <p class="el-ado">多重数据选择</p>
            <div class="el-input"><input type="text" class="el-ctrol" placeholder="请选择" /></div>
        </div>
    </div>

    <br />
    <a href="javascript:;" class="li" id="J_btn">展示数据</a>

    <br />
    <div class="" id="J_selecta"></div>
    <br />
    <div class="" id="J_selectb"></div>

    <script>
        $(function(){
            var data = {};

            $('#J_btn').click(function(){
                alert(JSON.stringify(data))
            })

            var wayarr = [
                {"id":1,"name":"1面聊"},
                {"id":2,"name":"2网络"},
                {"id":3,"name":"3电话"},
                {"id":4,"name":"4网络"},
                {"id":5,"name":"5电话"},
                {"id":6,"name":"6电话"},
                {"id":7,"name":"7电话"},
                {"id":8,"name":"8电话"},
                {"id":9,"name":"9电话"},
                {"id":10,"name":"10电话"},
                {"id":11,"name":"11电话"},
                {"id":12,"name":"12电话"},
                {"id":13,"name":"13电话"},
                {"id":14,"name":"14其他"},
                {"id":10,"name":"15电话"},
                {"id":11,"name":"16电话"},
                {"id":12,"name":"17电话"},
                {"id":13,"name":"18电话"},
                {"id":14,"name":"19其他"},
                {"id":20,"name":"20电话"},
                {"id":21,"name":"21电话"},
                {"id":22,"name":"22电话"},
                {"id":23,"name":"23电话"},
                {"id":24,"name":"24其他"},
                {"id":20,"name":"25电话"},
                {"id":21,"name":"26电话"},
                {"id":22,"name":"27电话"},
                {"id":23,"name":"28电话"},
                {"id":24,"name":"29其他"}
            ],
            select_way = new dataSelect({
                "target":document.getElementById('J_line_dataselect'), // 激活目标对象dom
                // "outer":document.getElementById('J_selecta'),
                "default_v":null, // 设置默认值
                "title":"单行数据",
                "datalist":wayarr,
                "selected":function(rs){
                },
                "confirm":function(rs,cb){
                    cb()
                    $('#J_a').val(rs.name)
                    console.log('c',rs)
                }
            });

            var dt = new datePicker({
                "targets":document.getElementsByClassName('J_choosetime'),
                // "minyear":1960,
                "confirm":function(rs,cb){
                    console.log(rs)
                    $(rs.target).find('input').val(rs.time_str)
                    cb();
                }
            })


            var dt = new dateTable({
                "targets":document.getElementsByClassName('J_choosetable'),
                "confirm":function(rs,cb){
                    console.log(rs)
                    $(rs.target).find('input').val(rs.time_str)
                    cb();
                },
                "monthchange":function(rs){
                    console.log(5,rs)
                },
                "selected":function(rs){
                    console.log(55,rs)
                }
            })


            var dt = new dateTable({
                "boxer":document.getElementById('J_selectb'),
                "paddingBottom":40,
                "monthchange":function(rs){
                    console.log(6,rs)
                },
                "selected":function(rs){
                    console.log(66,rs)
                }
            })

            var provincelist = [
                {id:1,name:'北京'},
                {id:2,name:'上海市'},
                {id:3,name:'广东省'},
                {id:4,name:'河北省'},
                {id:5,name:'黑龙江省'},
                {id:6,name:'湖南省'},
                {id:7,name:'安徽省'},
                {id:8,name:'浙江省'},
                {id:9,name:'西藏自治区'},
                {id:10,name:'青海'},
                {id:11,name:'江西省'},
                {id:12,name:'山东省'}
            ];

            var citylist = [
                {id:1,name:'邢台市'},
                {id:2,name:'石家庄'},
                {id:3,name:'邯郸市'},
                {id:4,name:'张家口'},
                {id:5,name:'保定市'},
                {id:6,name:'唐山市'},
                {id:7,name:'承德市'},
                {id:8,name:'沧州市'},
                {id:9,name:'廊坊市'}
            ];

            var arealist = [
                {id:1,name:'南共市'},
                {id:2,name:'桥东区'},
                {id:3,name:'桥西区'},
                {id:4,name:'清河县'},
                {id:5,name:'任丘显'},
                {id:6,name:'南和县'},
                {id:7,name:'新和县'},
                {id:8,name:'广宗县'},
                {id:9,name:'巨鹿县'}
            ];

            var adr = new addressPicker({
                target:document.getElementById('J_address'),
                title:"地址选择",
                fieldvalue:'id',
                fieldshow:'name',
                province:{
                    datalist:provincelist,
                    default_v:3,
                    change:function(rs){
                        console.log('p',rs)
                        adr.province.distouch(true);
                        adr.city.empty();
                        adr.area.empty();
                        $.ajax({
                            url:'/api/callback.json?t='+(new Date().getTime()),
                            success:function(rs){
                                if(rs.code==0){
                                    adr.province.distouch(false);

                                    arealist = [
                                        {id:1,name:'01邢台市'},
                                        {id:2,name:'01石家庄'},
                                        {id:3,name:'01邯郸市'},
                                        {id:4,name:'01张家口'},
                                        {id:5,name:'01保定市'},
                                        {id:6,name:'01唐山市'},
                                        {id:7,name:'01承德市'},
                                        {id:8,name:'01沧州市'},
                                        {id:9,name:'01廊坊市'}
                                    ];
                                    adr.city.reset({datalist:arealist,default_v:null})
                                }
                            }
                        })
                    }
                },
                city:{
                    datalist:citylist,
                    default_v:0,
                    change:function(rs){
                        console.log('c',rs)
                        adr.city.distouch(true);
                        adr.area.empty();
                        $.ajax({
                            url:'/api/callback.json?t='+(new Date().getTime()),
                            success:function(rs){
                                if(rs.code==0){
                                    adr.city.distouch(false);

                                    var list = [
                                        {id:1,name:'01南共市'},
                                        {id:2,name:'01桥东区'},
                                        {id:3,name:'01桥西区'},
                                        {id:4,name:'01清河县'},
                                        {id:5,name:'01任丘显'},
                                        {id:6,name:'01南和县'},
                                        {id:7,name:'01新和县'},
                                        {id:8,name:'01广宗县'},
                                        {id:9,name:'01巨鹿县'}
                                    ];
                                    adr.area.reset({datalist:list,default_v:null})
                                }
                            }
                        })
                    }
                },
                area:{
                    datalist:arealist,
                    default_v:0
                },
                confirm:function(rs,cb){
                    if(rs.province.id&&rs.city.id&&rs.area.id){
                        $('#J_address').find('input').val(rs.province.name+'/'+rs.city.name+'/'+rs.area.name);
                        cb();
                    }else{
                        CUES.tip({msg:'请选择完整'})
                    }
                    console.log(rs)
                }
            })

            var mutla = [
                {"id":1,"name":"a1面聊"},
                {"id":2,"name":"a2网络"},
                {"id":3,"name":"a3电话"},
                {"id":4,"name":"a4网络"},
                {"id":5,"name":"a5电话"},
                {"id":6,"name":"a6电话"},
                {"id":7,"name":"a7电话"},
                {"id":8,"name":"a8电话"},
                {"id":9,"name":"a9电话"}
            ],
            mutlb = [
                {"id":1,"name":"b1面聊"},
                {"id":2,"name":"b2网络"},
                {"id":3,"name":"b3电话"},
                {"id":4,"name":"b4网络"},
                {"id":5,"name":"b5电话"},
                {"id":6,"name":"b6电话"},
                {"id":7,"name":"b7电话"},
                {"id":8,"name":"b8电话"},
                {"id":9,"name":"b9电话"}
            ],
            mutlc = [
                {"id":1,"name":"c1面聊"},
                {"id":2,"name":"c2网络"},
                {"id":3,"name":"c3电话"},
                {"id":4,"name":"c4网络"},
                {"id":5,"name":"c5电话"},
                {"id":6,"name":"c6电话"},
                {"id":7,"name":"c7电话"},
                {"id":8,"name":"c8电话"},
                {"id":9,"name":"c9电话"}
            ],
            select_mult = new multDataSelect({
                "target":document.getElementById('J_mult'), // 激活目标对象dom
                // "outer":document.getElementById('J_selecta'),
                "default_v":null, // 设置默认值
                "title":"多重数据",
                "selectlist":[
                    {
                        "key":"keya",
                        "default_v":null,
                        "datalist":mutla,
                        "change":function(rs){
                            console.log(1,rs)
                        }
                    },
                    {
                        "key":"keyb",
                        "default_v":null,
                        "datalist":mutlb,
                        "change":function(rs){
                            console.log(2,rs)
                        }
                    },
                    {
                        "key":"keyc",
                        "default_v":null,
                        "datalist":mutlc,
                        "change":function(rs){
                            console.log(3,rs)
                        }
                    }
                ],
                "confirm":function(rs,cb){
                    cb()
                    console.log('c',rs)
                }
            });





        })
    </script>
</body>
</html>
